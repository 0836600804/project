CREATE DATABASE QL_XEMAY
USE QL_XEMAY
CREATE TABLE LOAIXE
(
	MALOAIXE NCHAR(10) NOT NULL PRIMARY KEY,
	TENLOAIXE NVARCHAR(30)
)
CREATE TABLE THUONGHIEUXE
(
	MATHUONGHIEU NCHAR(10) NOT NULL PRIMARY KEY,
	TENTHUONGHIEU NVARCHAR(50)
)
CREATE TABLE NHACUNGCAP
(
	MANCC NCHAR(10) NOT NULL PRIMARY KEY,
	TENNCC NVARCHAR(50),
	DIACHI NVARCHAR(50),
	SODIENTHOAI NCHAR(10)
)
CREATE TABLE XEMAY
(
	MAXEMAY NCHAR(10) NOT NULL PRIMARY KEY,
	TENXEMAY NVARCHAR(50),
	NGAYSANXUAT DATE,
	THOIGIANBAOHANH NVARCHAR(20),
	GIABANXE MONEY,
	MALOAIXE NCHAR(10) FOREIGN KEY(MALOAIXE) REFERENCES LOAIXE(MALOAIXE),
	MATHUONGHIEU NCHAR(10) FOREIGN KEY(MATHUONGHIEU) REFERENCES THUONGHIEUXE(MATHUONGHIEU),
	HINHANH NVARCHAR(120)
)

CREATE TABLE NCC_XEMAY
(
	MACC_XEMAY NCHAR(10) NOT NULL PRIMARY KEY,
	MAXE NCHAR(10) FOREIGN KEY(MAXE) REFERENCES XEMAY(MAXEMAY),
	MANCC NCHAR(10) FOREIGN KEY(MANCC) REFERENCES NHACUNGCAP(MANCC)
)
CREATE TABLE KHACHHANG
(
	MAKHACHHANG NCHAR(10) NOT NULL PRIMARY KEY,
	TENKHACHHANG NVARCHAR(50),
	NGAYSINH DATE,
	GIOITINH NVARCHAR(5),
	SODIENTHOAI NCHAR(10),
	TAIKHOAN VARCHAR(50) NOT NULL,
	MATKHAU NVARCHAR(50) NOT NULL,
	EMAIL NVARCHAR(30),
	DIACHI NVARCHAR(30)
)
CREATE TABLE HOADON
(
	MAHOADON NCHAR(10) NOT NULL PRIMARY KEY,
	NGAYDATHANG DATE,
	NGAYGIAOHANG DATE,
	TONGTIEN MONEY,
	TINHTRANGGIAOHANG INT,
	MAKHACHHANG NCHAR(10) FOREIGN KEY(MAKHACHHANG) REFERENCES KHACHHANG(MAKHACHHANG)
)
CREATE TABLE CHITIETHD
(
	MAHOADON NCHAR(10),
	MACC_XEMAY NCHAR(10),
	SOLUONGMUA INT,
	DONGIA MONEY,
	PRIMARY KEY(MAHOADON,MACC_XEMAY),
	FOREIGN KEY(MAHOADON) REFERENCES HOADON(MAHOADON),
	FOREIGN KEY(MACC_XEMAY) REFERENCES NCC_XEMAY(MACC_XEMAY)
)

INSERT INTO LOAIXE
VALUES
('LX01', N'Xe Tay Ga'),
('LX02', N'Xe Số'),
('LX03', N'Xe Tay Côn'),
('LX04', N'Xe MoTo'),
('LX05', N'Xe Điện')
SELECT *FROM LOAIXE

INSERT INTO THUONGHIEUXE
VALUES
('TH01',N'Honda'),
('TH02',N'Yamaha'),
('TH03',N'Vespa'),
('TH04',N'SuZuKi'),
('TH05',N'Kawasaki'),
('TH06',N'Vinfast')
SELECT *FROM THUONGHIEUXE

INSERT INTO NHACUNGCAP
VALUES
('NCC001', N'Công Ty TNHH Hướng Tuyết', N'Hà Nội', N'0500462073'),
('NCC002', N'Công Ty TNHH SX Lắp Ráp Tuấn Nghĩa', N'TPHCM', N'0357216482'),
('NCC003', N'Công Ty TNHH Hòa Bình Minh', N'Đồng Nai', N'0616517079'),
('NCC004', N'Công Ty TNHH XNK Đại Đô Thành', N'TPHCM', N'0613675522')
SELECT *FROM NHACUNGCAP

SET DATEFORMAT DMY
INSERT INTO XEMAY
VALUES
('MX001', N'Wave Alpha', '28/9/2019',N'12 Tháng', 18000000 ,'LX02','TH01',N'honda-wave-alpha-4-454d.PNG'),
('MX002', N'Blade', '21/10/2020',N'24 Tháng', 19250000 ,'LX02','TH01',N'honda-blade-trang-den-6fc1.PNG'),
('MX003', N'Vario', '15/07/2021',N'36 Tháng', 44800000 ,'LX01','TH01',N'fe8640_af177c0a1b4b47519c4c18932026e186~mv2.PNG'),
('MX004', N'Exciter', '18/08/2019', N'36 Tháng', 46150000 ,'LX03','TH02',N'exciter150phienbankyniem20nam.PNG'),
('MX005', N'GSX 150', '15/11/2020', N'48 Tháng', 55000000 ,'LX04','TH04',N'xe-xam.PNG'),
('MX006', N'W175', '20/12/2022', N'48 Tháng', 72500000 ,'LX04','TH05',N'e719ebec-7de7-4d85-aa60-84edb68e6095.PNG'),
('MX007', N'Vespa GTS 150 ABS','19/1/2023', N'48 Tháng', 115400000 ,'LX01','TH03',N'Piaggio-_VESPA-GTS-125-ABS-I.E.-Nero-Vulcano.PNG'),
('MX008', N'Vinfast Theon', '20/01/2023', N'24 Tháng', 63000000 ,'LX05','TH06',N'Hinh-anh-xe-may-dien-VinFast-Theon-S.PNG'),
('MX009', N'R15', '20/08/2019', N'24 Tháng', 71500000 ,'LX03','TH02',N'R15_SPCBLACK_IDN_2020-1.PNG'),
('MX0010', N'Suzuki GZ150-A', '10/03/2023', N'24 Tháng', 70200000 ,'LX03','TH04',N'Artboard 1@2x.PNG'),
('MX0011', N'CB500X', '17/04/2022',N'36 Tháng', 194290000 ,'LX04','TH01',N'x0qcut.PNG'),
('MX0012', N'NVX', '15/07/2020',N'36 Tháng', 56000000 ,'LX01','TH02',N'X30-Red-004.PNG'),
('MX0013', N'JUPITER FI', '22/10/2019',N'36 Tháng', 30240000 ,'LX02','TH02',N'Jupiter-Mat-Black-004.PNG'),
('MX0014', N'VESPA SPRINT S 150', '18/08/2021', N'36 Tháng', 97800000 ,'LX01','TH03',N'95adf03bf013264684475bc7332e77ae.PNG'),
('MX0015', N'VESPA GTV 300', '10/11/2022', N'48 Tháng', 159800000 ,'LX01','TH03',N'gtv-sei-giorni-300.PNG'),
('MX0016', N'Satria F150', '18/12/2022', N'36 Tháng', 48490000 ,'LX03','TH04',N'trang-do-den.PNG'),
('MX0017', N'Z900 ABS','19/01/2022', N'48 Tháng', 324900000 ,'LX04','TH05',N'kawasaki-z900-abs-2019-gris-55a3a5.PNG'),
('MX0018', N'NINJA ZX-25R SE', '22/01/2023', N'48 Tháng', 197300000 ,'LX04','TH05',N'f9f47c4f-f156-4105-b2ca-30fe81bd510a.PNG'),
('MX0019', N'Vinfast EVO200 LITE', '20/12/2022', N'24 Tháng', 18000000 ,'LX05','TH06',N'WHR.PNG'),
('MX0020', N'Vinfast VENTO S', '10/03/2023', N'24 Tháng', 50000000 ,'LX05','TH06',N'img-top-ventos-blue.PNG'),
('MX0021', N'V-STROM 250SX', '16/11/2022', N'36 Tháng', 132900000 ,'LX03','TH04',N'V-STROM-250-SX-NEGRA.PNG'),
('MX0022', N'BURGMAN STREET 125', '27/08/2023', N'36 Tháng', 48600000 ,'LX01','TH04',N'360-gallery_image.PNG'),
('MX0023', N'KLX230R', '10/08/2023', N'36 Tháng', 148700000 ,'LX04','TH05',N'8695fab0-c32c-4bd9-92a1-24e0753b878d.PNG'),
('MX0024', N'NINJA 400 ABS', '15/11/2023', N'48 Tháng', 168600000 ,'LX04','TH05',N'ad7006f7-5390-437b-81d5-d0d4b8fa1165.PNG'),
('MX0025', N'VULCAN S', '13/09/2023', N'48 Tháng', 241000000 ,'LX04','TH05',N'4d71b7b6cd7cfd141b32ee4ec457ed8f.PNG'),
('MX0026', N'NINJA 400 ABS KRT EDITION', '14/09/2023', N'48 Tháng', 171600000 ,'LX04','TH05',N'765ffa29-81e8-44dd-8086-891ec4fd8832-745x418.PNG'),
('MX0027', N'NINJA H2R', '20/09/2022', N'36 Tháng', 1875000000 ,'LX04','TH05',N'hjCzqV.PNG'),
('MX0028', N'JANUS', '20/09/2022', N'24 Tháng', 28571000 ,'LX01','TH02',N'Pearl-Janus-White-Metallic-004.PNG'),
('MX0029', N'LATTE', '27/05/2023', N'24 Tháng', 38095000 ,'LX01','TH02',N'trang1.PNG'),
('MX0030', N'FREEGO', '28/07/2023', N'24 Tháng', 30142000 ,'LX01','TH02',N'FreeGo-S-White-004.PNG'),
('MX0031', N'GRANDE', '28/07/2023', N'24 Tháng', 46047000 ,'LX01','TH02',N'Grande-5-2.PNG'),
('MX0032', N'JUPITER FINN', '11/09/2022', N'24 Tháng', 28178000 ,'LX02','TH02',N'ae85e4233af84a77a23de5c26cef90a4.PNG'),
('MX0033', N'SIRIUS', '15/09/2021', N'12 Tháng', 18949000 ,'LX02','TH02',N'Sirius-Mat-Black-Disk-004.PNG'),
('MX0034', N'NEO S', '15/09/2023', N'24 Tháng', 49091000 ,'LX05','TH02',N'1681096873_uI9E1jQfrVyPZLsW_1681099970-phpsr7dnq.PNG'),
('MX0035', N'SH160i', '22/07/2022', N'36 Tháng', 73921091 ,'LX01','TH01',N'xe-may-vinh-truong-tien-giang-11.PNG'),
('MX0036', N'Rebel 1100', '05/06/2023', N'36 Tháng', 449500000 ,'LX04','TH01',N'anh-1-16487162898591638768109.PNG'),
('MX0037', N'Africa Twin', '08/09/2023', N'24 Tháng', 720990000 ,'LX04','TH01',N'rooo_-_edited.PNG'),
('MX0038', N'Gold Wing', '22/09/2021', N'36 Tháng', 1231500000 ,'LX04','TH01',N'motorfiets-honda-goldwing-png.PNG'),
('MX0039', N'CBR650R', '15/09/2022', N'24 Tháng', 254990000 ,'LX04','TH01',N'wp4637255.PNG'),
('MX0040', N'Transalp', '15/10/2023', N'36 Tháng', 309000000 ,'LX04','TH01',N'l_xl750_2023-03-16.PNG')
SELECT *FROM XEMAY

INSERT INTO NCC_XEMAY
VALUES
('CC_XM01','MX001','NCC001'),
('CC_XM02','MX002','NCC002'),
('CC_XM03','MX003','NCC003'),
('CC_XM04','MX004','NCC004'),
('CC_XM05','MX005','NCC001'),
('CC_XM06','MX006','NCC002'),
('CC_XM07','MX007','NCC003'),
('CC_XM08','MX008','NCC004'),
('CC_XM09','MX009','NCC001'),
('CC_XM010','MX0010','NCC002')
SELECT *FROM NCC_XEMAY

SET DATEFORMAT DMY
INSERT INTO KHACHHANG
VALUES
(N'KH001', N'Nguyễn Duy Quý', '22/12/1999',N'Nam', N'0522546803','nduyqui',N'12345Qui',N'quiduy01@gmail.com',N'Quận 1 TP.HCM'),
(N'KH002', N'Nguyễn Minh Quang','17/11/2000',N'Nam', N'0333129095','nminhquang1',N'13579Quang',N'quangkg@gmail.com',N'Hồ Gươm Hà Nội' ),
(N'KH003', N'Trần Khôi Ngô', '27/02/1998',N'Nam', N'0387843720', 'khoitran71',N'000000Khoi',N'ngokhoi21@gmail.com',N'Mỏ Cày Nam Bến Tre'),
(N'KH004', N'Bạch Phước An', '01/01/1995', N'Nam',N'0559371294', 'bpa079',N'17283An',N'phuocan71@gmail.com',N'Gò Vấp TP.HCM'),
(N'KH005', N'Nguyễn Hữu Đức', '09/12/2001',N'Nam', N'0379248122', 'aaaaa71',N'12345678D',N'duc091@gmail.com',N'Châu Thành Tiền Giang')
SELECT *FROM KHACHHANG

SET DATEFORMAT DMY
INSERT INTO HOADON
VALUES
('HD01','05/01/2020','07/01/2020',null,null,'KH001'),
('HD02','09/03/2021','12/03/2021',null,null,'KH002'),
('HD03','10/12/2021','13/12/2021',null,null,'KH003'),
('HD04','20/05/2020','21/05/2020',null,null,'KH004'),
('HD05','28/02/2021','01/03/2021',null,null,'KH005')
SELECT*FROM HOADON

INSERT INTO CHITIETHD
VALUES
('HD01','CC_XM01',1,18000000),
('HD02','CC_XM02',1,19250000),
('HD03','CC_XM03',1,44800000),
('HD04','CC_XM04',1,46150000),
('HD05','CC_XM05',1,55000000)
SELECT*FROM CHITIETHD

UPDATE HOADON SET TONGTIEN=SOLUONGMUA*DONGIA FROM CHITIETHD WHERE HOADON.MAHOADON=CHITIETHD.MAHOADON